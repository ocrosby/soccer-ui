<h1>Player Search</h1>

<div *ngIf="overlay">
    <app-spinner-overlay [overlay]="overlay">
    </app-spinner-overlay>
</div>

<form clrForm clrLayout="compact" clrLabelSize="1" (submit)="onSearch()">
    <clr-select-container>
        <label>Position</label>
        <select clrSelect name="position" [(ngModel)]="selectedPosition">
            <option value="All">All</option>
            <option value="Goalkeeper">Goalkeeper</option>
            <option value="Defender">Defender</option>
            <option value="Midfielder">Midfielder</option>
            <option value="Forward">Forward</option>
        </select>
        <clr-control-helper>Player Position</clr-control-helper>
        <clr-control-error>This field is required!</clr-control-error>
    </clr-select-container>

    <clr-select-container>
        <label>Year</label>
        <select clrSelect name="gradYear" [(ngModel)]="selectedGradYear">
            <option value="All">All</option>
            <option value="2022">2022</option>
            <option value="2023">2023</option>
            <option value="2024">2024</option>
            <option value="2025">2025</option>
            <option value="2026">2026</option>
        </select>
        <clr-control-helper>Graduation Year</clr-control-helper>
        <clr-control-error>This field is required!</clr-control-error>
    </clr-select-container>

    <clr-select-container>
        <label>Region</label>
        <select clrSelect name="region" [(ngModel)]="selectedRegion">
            <option value="All">All</option>
            <option *ngFor="let region of regions" value="{{region}}">{{region}}</option>
        </select>
        <clr-control-helper>Player Region</clr-control-helper>
        <clr-control-error>This field is required!</clr-control-error>
    </clr-select-container>

    <clr-select-container>
        <label>State</label>
        <select clrSelect name="state" [(ngModel)]="selectedState" (change)="onSearch()">
            <option value="All">All</option>
            <option *ngFor="let state of states" value="{{state}}">{{state}}</option>
        </select>
        <clr-control-helper>Player State</clr-control-helper>
        <clr-control-error>This field is required!</clr-control-error>
    </clr-select-container>

    <clr-select-container>
        <label>Gender</label>
        <select clrSelect name="gender" [(ngModel)]="selectedGender">
            <option value="All">All</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
        </select>
        <clr-control-helper></clr-control-helper>
        <clr-control-error>This field is required!</clr-control-error>
    </clr-select-container>

    <button type="submit" mat-button class="btn btn-primary">Search</button>
</form>

<clr-datagrid>
    <clr-dg-column>Name</clr-dg-column>
    <clr-dg-column>Position</clr-dg-column>
    <clr-dg-column>Club</clr-dg-column>
    <clr-dg-column>Rating</clr-dg-column>
    <clr-dg-column>Year</clr-dg-column>
    <clr-dg-column>State</clr-dg-column>
    <clr-dg-column>Commitment</clr-dg-column>

    <clr-dg-row *ngFor="let element of players">
        <clr-dg-cell><a href="{{element.url}}" target="_blank">{{element.name}}</a></clr-dg-cell>
        <clr-dg-cell>{{element.position}}</clr-dg-cell>
        <clr-dg-cell>{{element.club}}</clr-dg-cell>
        <clr-dg-cell>{{element.rating}}</clr-dg-cell>
        <clr-dg-cell>{{element.year}}</clr-dg-cell>
        <clr-dg-cell>{{element.state}}</clr-dg-cell>
        <clr-dg-cell>{{element.commitment}}</clr-dg-cell>
    </clr-dg-row>

    <clr-dg-footer>{{players.length}} players</clr-dg-footer>
</clr-datagrid>
